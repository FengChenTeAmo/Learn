# 5-14

用户部分  
> 1. 用户登陆  
> 用户使用微信通过公众号进入登录页面，判断数据库中是否有此用户的OpenID。如果有就默认自动登录，进入主页面。若数据库中没有此用户的OpenID,则需要管理员添加一个账户名和密码提供给此用户，此用户登录之后后台自动绑定OpenID和用户名密码。实现微信自动登录。  
> 2.用户注册  
> 用户注册只允许管理员在pc端进行注册账户名和密码。微信OpenID默认为0，当用户使用微信端输入账户名和密码登录时自动更新OpenID。  
> 3.用户权限  
> 给用户组分配权限，一个用户组会有多个用户，一个用户会有多个用户组，有多个权限。  

监管部门部分  
>1.监管部门可添加、删除、修改。  
>监管部门省市区通过联动菜单选择。  
>2.监管部门与企业单位关联  
>监管部门会监管多个企业，一个企业可能会被多个监管部门监管  


企业单位部分  
>1.管理员可添加、删除、修改企业单位  

检查单  
>1.检查单创建  
>管理员创建检查单。  
>2.检查单完成状态。  
>选择检查单进入该检查单对应的检查记录表，在确认添加完记录表之后点击确认完成。修改该检查单完成状态。当检查单状态标为已完成时，该检查单和该检查单对应的检查记录表将无法改动，只允许查询。  
>3.查询和展示  
>检查单列表默认展示未完成的检查单数据，点击“显示已完成检查单”按钮显示已完成的检查单。默认必检查单创建时间区间查询检查单列表，若未选择时间区间，则不显示任何数据，提示用户选择时间区间。模糊查询企业单位中Name字段，返回企业ID，通过该企业ID查询对应的检查单数据。

检查记录表
>1.检查记录表添加。  
>用户选择检查单后，进入检查记录表页面。点击添加记录按钮进入检查项目页面，选择相关单元和流程之后拍照上传和备注。点击提交之后后台自动创建附件表，一张图片对应一条附件表数据。一个检查记录会有多个附件表数据。后台自动获取用户当前位置，GPS_Z默认为0.0。  
>2.检查记录表删除。  
>检查记录表在该检查单状态为未完成之前可以添加和删除。  
